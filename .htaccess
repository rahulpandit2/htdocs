# Enable the rewrite engine
RewriteEngine On

# Set your base directory if site is in a subdirectory (adjust if needed)
# RewriteBase /

# Redirect root domain to public/home
# Check if request is for the root (/)
RewriteCond %{REQUEST_URI} ^/$
# Redirect to public/home without showing the extension
RewriteRule ^$ /public/home [R=302,L]

# Handle PHP extension removal
# Skip rewrite if it's an existing directory
RewriteCond %{REQUEST_FILENAME} !-d
# Skip rewrite if it's an existing file
RewriteCond %{REQUEST_FILENAME} !-f
# Only rewrite if the requested file with .php extension exists
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [NC,L]

# 404 error handling
# Don't handle existing files or directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Don't redirect the 404 page itself to avoid loops
RewriteCond %{REQUEST_URI} !^/public/404$
# Redirect to your custom 404 page (without .php extension in URL)
RewriteRule ^(.*)$ /public/404 [R=302,L]

# Alternatively, use ErrorDocument for a simpler 404 setup
# ErrorDocument 404 /config/404.php